<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Loading the Fiction</title>
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/loader.css">
    <link rel="stylesheet" href="css/oasis.css">
    <link rel="stylesheet" href="css/fonts.css">
    <link rel="stylesheet" type="text/css" href="css/contact2.css">
  </head>
  <body>
    <section id="loader">
      <div id="frame">
        <svg xmlns="http://www.w3.org/2000/svg" width="300" height="300" viewBox="0 0 300 300">
          <polygon class="first" points="32.5 206.57 32.5 161 63 146.65 89.19 135.89 106.29 117.95 132.17 74.33 140.25 33.28 148.38 49.54 122.08 125.6 117.05 152.63 122.08 189.23 144.56 220.8 198.85 268.16 208.9 296.14 165.61 268.16 118.25 268.16 85 273.42 64.67 258.35 91.46 260.03 106.29 238.5 106.77 217.93 91.46 185.16 63 170.74 46.85 176.15 44.34 180.74 32.5 206.57" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <polygon class="first" points="166.56 220.8 157.35 216.01 132.17 168.9 129.97 130.63 148.38 94.51 179.72 82.07 213.44 64.86 230.55 44.94 230.55 22.51 217.51 3.86 239.51 17.49 251.71 56.36 226.84 96.66 184.74 123.45 162.02 149.28 157.35 165.07 157.35 189.23 166.56 220.8" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <polygon class="first" points="226.84 265.89 190.24 238.5 162.02 189.23 173.14 152.63 195.98 127.28 182.89 156.7 184.74 183.78 194.35 197.69 198.85 180.74 222 161.4 213.44 186.48 210.42 220.8 226.84 265.89" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <polygon class="first" points="199.69 139.12 206.39 119.74 238.56 99.65 256.07 70.6 262.36 47.87 267.5 51.22 236.29 184.32 232.89 205.01 256.38 216.25 263.55 238.5 242.74 244.48 228.51 231.68 222 202.26 235.57 144.38 209.38 153.47 197.06 167.1 190.24 181.09 186.78 171.53 190.24 157.89 207.22 141.27 233.18 130.63 243.41 116.33 242.82 114.29 213.44 127.28 199.69 139.12" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <polygon class="first" points="68.02 94.51 83.57 94.51 92.66 114.6 81.06 128.35 65.39 127.28 56.78 111.01 68.02 94.51" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <polygon class="first" points="148.38 26.46 164.17 34.47 169.79 55.4 190.24 51.22 217.51 45.83 195.98 61.5 149.22 80.64 154.25 38.42 148.38 26.46" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <!-- <g id="Dhad"> -->
          <polyline class="second" points="132.17 74.33 122.52 124.32 117.05 152.63 106.29 117.95" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <polyline class="second" points="89.19 135.89 117.05 152.63 63 146.65 46.85 176.15 44.34 180.74 32.5 161" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <polyline class="second" points="63 170.74 117.05 152.63 91.46 185.16 122.08 189.23 106.77 217.93 144.56 220.8 165.61 268.16 198.85 268.16" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <polyline class="second" points="106.77 217.93 165.61 268.16 106.29 238.5 118.25 268.16 91.46 260.03 85 273.42" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <!-- </g> -->
          <!-- <g id="Saanp"> -->
          <polyline class="second" points="230.55 22.51 239.51 17.49 230.6 44.78 226.84 96.66 213.44 64.86" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <polyline class="second" points="239.51 17.49 226.84 96.66 179.72 82.07 184.74 123.45" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <polyline class="second" points="179.72 82.07 162.02 149.28 148.38 94.51" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <polyline class="second" points="129.97 130.63 162.02 149.28 132.17 168.9 157.35 165.07 157.35 216.01" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <!-- </g> -->
          <!-- <g id="F"> -->
          <polyline class="second" points="182.89 156.7 173.14 152.63 184.74 183.78 162.02 189.23" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <polyline class="second" points="184.74 183.78 190.24 238.5 210.42 220.8 194.35 197.69" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <polyline class="second" points="210.42 220.8 198.85 180.74 213.44 186.48" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <!-- </g> -->
          <!-- <g id="Music"> -->
          <polyline class="second" points="206.39 119.74 213.44 127.28 238.56 99.65 242.82 114.29" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <polyline class="second" points="256.07 70.6 243.41 116.33 235.57 144.38 207.22 141.27 209.38 153.47" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <polyline class="second" points="267.5 51.22 235.57 144.38 233.18 130.63" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <polyline class="second" points="207.22 141.27 197.06 167.1 190.24 157.89 190.24 181.09" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <polyline class="second" points="235.57 144.38 236.29 184.32 222 202.26" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <polyline class="second" points="228.51 231.68 232.89 205.01 242.74 244.48" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <line class="second" x1="263.55" y1="238.5" x2="232.89" y2="205.01" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <!-- </g> -->
          <!-- <g id="Sar"> -->
          <polygon class="second" points="68.02 94.51 92.66 114.6 65.39 127.28 68.02 94.51" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <!-- </g> -->
          <!-- <g id="Panchi"> -->
          <polyline class="second" points="164.17 34.47 154.25 38.42 169.79 55.4 149.22 80.64" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <polyline class="second" points="190.24 51.22 195.98 61.5 169.79 55.4" fill="none" stroke="#231f20" stroke-linejoin="bevel" stroke-width="0.6"/>
          <!-- </g> -->
        </svg>
        <div id="box" class="inactive logo">
          <aside id="logotext">
            <span id="o17"></span>
            <span id="realmsOfFiction"></span>
          </aside>
        </div>
      </div>
    </section>
    <section id="Landing" class="inactive">
      <span id="Events"><label>VIEW EVENTS</label></span>
      <header>
        <nav>
          <ul>
            <li>ABOUT</li>
            <li>PROF SHOW</li>
            <li style="display: none">SPONSORS</li>
            <li id="contact">CONTACT</li>
          </ul>
          <div id="ham">

          </div>
          <span id="Register"><label>REGISTER</label></span>
        </nav>
        <aside class="micro">

        </aside>
      </header>
      <footer>
        <nav>
          <ul>
            <li>SCHEDULE</li>
            <li>DEVELOPERS</li>
            <li>AFTERMOVIE 2016</li>
            <li style="display: none">OASIS PRESS</li>
            <li style="display: none">JOY OF GIVING WEEK</li>
            <li style="display: none">STORE</li>
          </ul>
          <span id="Aftermovie">31 OCT - 4 NOV</span>
        </nav>
        <ul>
          <li class="facebook"></li>
          <li class="twitter"></li>
          <li class="youtube"></li>
          <li class="instagram"></li>
        </ul>
      </footer>
    </section>
    <section id="ham_menu" class="inactive">
      <aside class="head">
        <span class="arrow" id="back_arrow"></span>
        <span>OASIS'17</span>
      </aside>
      <aside class="nav">
        <div>
          <span>ABOUT</span>
          <span style="display: none">PROF SHOW</span>
          <span style="display: none">SPONSORS</span>
          <span>CONTACT</span>
        </div>
        <div>
          <span>SCHEDULE</span>
          <span>AFTERMOVIE 2016</span>
          <span style="display: none">BUS SERVICE</span>
          <span style="display: none">OASIS PRESS</span>
          <span style="display: none">JOY OF GIVING WEEK</span>
          <span>DEVELOPERS</span>
        </div>
        <div>
          <span>31 OCT - 4 NOV</span>
        </div>
      </aside>
    </section>
    <div id="ham_wrapper">

    </div>
    <div id="item" class="inactive">
      <div class="header"></div>
      <div id="item_content">

      </div>
    </div>
    <div id="contacts">
      <div id = "wrapper">
    	</div>
    	<script type="text/javascript">
    		var stuccans = [
    			{
    			  name: "Bharatha Ratna Puli",
    			  post: "President, Students Union",
    			  email: "president@pilani.bits-pilani.ac.in",
    			  phone: "123123123123"
    			},
    			{
    			  name: "Shivam Jindal",
    			  post: "General Secretary, Students Union",
    			  email: "hello@gmail.com",
    			  phone: "123123123123"
    			},
    			{
    			  name: "Asim Shah",
    			  post: "Registration &amp; Other Enquiries",
    			  email: "pcr@bits-oasis.org",
    			  phone: "+91 70236 11971"
    			},
    			{
    			  name: "Arnav Kundra",
    			  post: "Reception and Accomodation",
    			  email: "recnacc@bits-oasis.org",
    			  phone: "+91 99280 6633"
    			},
    			{
    			  name: "Nisanth Verma",
    			  post: "Controls",
    			  email: "controls@bits-oasis.org",
    			  phone: "+91 80588 77118"
    			},
    			{
    			  name: "Arjun Tyagi",
    			  post: "Website, App &amp; Online Payments",
    			  email: "webmaster@bits-oasis.org",
    			  phone: "+91 88750 52545"
    			},
    			{
    			  name: "Gowtam Chandrahasa",
    			  post: "Art, Design &amp; Publicity",
    			  email: "adp@bits-oasis.org",
    			  phone: "+91 99820 84940"
    			},
    			{
    			  name: "Siddhant Narula",
    			  post: "Sponsorship and Marketing",
    			  email: "sponsorship@bits-oasis.org",
    			  phone: "+91 99822 00768"
    			}
    		];
    		for (var s in stuccans) {
    			wrapper.innerHTML +=
    			'<div class = "person">\
    				<center>\
    					<div class = "person-pic">\
    						<div class = "pic"></div>\
    						<span>'+stuccans[s].name+'</span>\
    						<span>'+stuccans[s].post+'</span>\
    					</div>\
    					<div class = "person-mail">'+stuccans[s].email+'</div>\
    					<div class = "person-number">'+stuccans[s].phone+'</div>\
    				</center>\
    			</div>';
    		}
        for(i=0;i<8;i++){
        	if(i%2 == 0){
        		document.getElementsByClassName("person-mail")[i].style.background = "#ffe14a";
        		document.getElementsByClassName("person-number")[i].style.background = "#ffe14a";
        	}
        	else{
        		document.getElementsByClassName("person-mail")[i].style.background = "#00f5b2";
        		document.getElementsByClassName("person-number")[i].style.background = "#00f5b2";
        	}
        }
    	</script>
    </div>
    <div id="events">
      <div id="events_wrapper" class="ltr">
      <div class="logo" id="logo"></div>
    <header>
      <div id="Arrows">
        <div class="change prev" id="arrow1"></div>
        <div class="change next" id="arrow2"></div>
      </div>
    </header>
    <section>
      <div id="Main">
        <div id="Polys">
          <div class="change prev" id="arrow3"></div>
          <div id="Box" class="Johnny">
            <div id="a1"></div>
            <div id="a2"></div>
            <div id="a3"></div>
            <div id="a4"></div>
            <div id="a5"></div>
            <div id="a6"></div>
            <div id="a7"></div>
            <div id="a8"></div>
            <div id="a9"></div>
            <div id="a10"></div>
            <div id="a11"></div>
            <div id="a12"></div>
            <div id="a13"></div>
            <div id="a14"></div>
            <div id="a15"></div>
            <div id="a16"></div>
            <div id="a17"></div>
            <div id="a18"></div>
            <div id="a19"></div>
            <div id="a20"></div>
            <div id="a21"></div>
            <div id="a22"></div>
            <div id="a23"></div>
            <div id="a24"></div>
          </div>
          <div class="change next" id="arrow4"></div>
        </div>
        <div id="EventName">
          <span>Random Name</span>
        </div>
        <div id="TagLine">
          <span></span>
        </div>
      </div>
      <nav>
        <ul>
          <li id="ViewEvent">EVENTS</li>
          <li>ALL CATEGORIES</li>
        </ul>
        <div></div>
      </nav>
    </section>
    <div class="parent lightbox">
        <div class="backrotate">
        </div>
        <div class='crosscont'>
            <div class="cross">
                <a class="crosslink" href="#">
                    <p class="crossbar" id="anticlk"></p>
                    <p class="crossbar" id="clk"></p>
                </a>
            </div>
        </div>
        <div class="evtcont">
            <ul class="evtname">
                <li id="a" class="evt">
                    <h1 class=" name dust">EVENT NAME</h1>
                    <p>brief</p>
                    <p id="bottom"></p>
                </li>
                <li id="b" class="evt">
                    <h1 class=" name dust">EVENT NAME</h1>
                    <p>brief</p>
                    <p id="bottom"></p>
                </li>
                <li id="c" class="evt">
                    <h1 class=" name dust">EVENT NAME</h1>
                    <p>brief</p>
                    <p id="bottom"></p>
                </li>
                <li id="d" class="evt">
                    <h1 class=" name dust">EVENT NAME</h1>
                    <p>brief</p>
                    <p id="bottom"></p>
                </li>
                <li id="e" class="evt">
                    <h1 class=" name dust">EVENT NAME</h1>
                    <p id="">brief</p>
                    <p id="bottom"></p>
                </li>
                <li id="f" class="evt">
                    <h1 class=" name dust">EVENT NAME</h1>
                    <p>brief</p>
                    <p id="bottom"></p>
                </li>
                <li id="f" class="evt">
                    <h1 class=" name dust">EVENT NAME</h1>
                    <p>brief</p>
                    <p id="bottom"></p>
                </li>
                <li id="f" class="evt">
                    <h1 class=" name dust">EVENT NAME</h1>
                    <p>brief</p>
                    <p id="bottom"></p>
                </li>
            </ul>
        </div>
        <div class="dummy"></div>
    </div>
    <div class="info_wrapper">
        <div class="backrotate">
        </div>
        <div class="info">
            <div class="crosscont_1">
                <div class="cross" id="cross_info">
                    <a class="crosslink" href="#">
                        <p class="crossbar" id="anticlk"></p>
                        <p class="crossbar" id="clk"></p>
                    </a>
                </div>
            </div>
            <div class="evtcont_info">
                <ul class="evtname">
                    <li id="f" class="evt">
                        <h1 class=" name dust">EVENT NAME</h1>
                        <p>brief</p>
                        <p id="bottom"></p>
                        <div class="content">
                            <p>There is no Internet connection
                                <br> Try:
                                <br> Checking the network cables, modem and router
                                <br> Reconnecting to Wi-Fi
                                <br> DNS_PROBE_FINISHED_NO_INTERNET
                            </p>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="dummy"></div>
        </div>
    </div>
    <script>
    var exampleSocket = new WebSocket("wss://bits-oasis.org/2017maintest", "echo-protocol");
    exampleSocket.onopen = function (event) {
      console.log("WS Opened Successfully");
      var data = [
        {
          type: "static",
          url: "css/events.css",
          ext: "css"
        },
        {
          type: "static",
          url: "css/characters.css",
          ext: "css"
        },
        {
          type: "static",
          url: "css/transitions.css",
          ext: "css"
        },
        {
          type: "static",
          url: "css/lightbox.css",
          ext: "css"
        },
        {
          type: "static",
          url: "css/fonts.css",
          ext: "css"
        },
        {
          type: "static",
          url: "js/characters.js",
          ext: "js"
        },
        {
          type: "static",
          url: "js/events.js",
          ext: "js"
        },
        {
          type: "static",
          url: "img/Oasis-Logo.png",
          ext: "img",
          mime: "png",
          ref: "logo"
        },
        {
          type: "static",
          url: "img/arrow1.png",
          ext: "img",
          mime: "png",
          ref: "arrow1"
        },
        {
          type: "static",
          url: "img/arrow1.png",
          ext: "img",
          mime: "png",
          ref:"arrow2"
        },{
          type: "static",
          url: "img/arrow1.png",
          ext: "img",
          mime: "png",
          ref:"arrow3"
        },
        {
          type: "static",
          url: "img/arrow1.png",
          ext: "img",
          mime: "png",
          ref:"arrow4"
        },
        {
          type: "static",
          url: "fonts/bbr.ttf",
          ext: "ttf"
        },
      ];

      for (var i in data) {
          data[i].last = retrive_last(data[i].url);
          console.log(data[i] .last);
          exampleSocket.send(JSON.stringify(data[i]));
      }
    };
    exampleSocket.onmessage = function(event) {
      var res = JSON.parse(event.data);
      console.log(res);
      if(res.load){
        if(res.ext == "css") {
          inject(res.data, "style");
        }
        else if(res.ext == "js") {
         inject(res.data, "script");
        }else if(res.ext =="img"){
          
          eval(res.ref).style.background = "url("+res.data+")";
          eval(res.ref).style.backgroundSize = "contain";
          console.log(eval(res.ref).style.background, 'umms');
        }
        save(res);
      }else{
        if(Object.keys(res).indexOf("ref"))
        {inject(window.localStorage.getItem(res.url+"_data"), window.localStorage.getItem(res.url+"_tag"),res.ref)}
        else{
          inject(window.localStorage.getItem(res.url+"_data"), window.localStorage.getItem(res.url+"_tag"), null)
        }
      }
    }

    function save(res){
      window.localStorage.setItem(res.url, "true");
      window.localStorage.setItem(res.url + "_data",res.data);
      window.localStorage.setItem(res.url + "_last",res.last);
      window.localStorage.setItem(res.url + "_ext",res.ext);
      if(res.ext =="css"){
        window.localStorage.setItem(res.url + "_tag","style");
      }else if(res.ext =="js"){
        window.localStorage.setItem(res.url + "_tag","script");
      }else{
        window.localStorage.setItem(res.url + "_tag","null");
        
      }

    }
    function retrive_last(url){
      return window.localStorage.getItem(url + "_last");
    }

    function inject(data, tag, ref){
      
      if(tag != "null")
      {
        var ele = document.createElement(tag);
        document.head.appendChild(ele);
        ele.innerHTML = data;
      }else{
        console.log(tag)
        if(ref){
          eval(ref).style.background = "url("+window.localStorage.getItem(url + "_data")+")";
          eval(ref).style.backgroundSize = "contain";
          // console.log(eval(res.ref).style.background, 'umms');
        }
      }
    }

    </script>
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
    <script>
         $('#ViewEvent').click(function() {
            $('.lightbox').slideToggle();
        });
         var disable_cross = false
        $('.cross').click(function(e) {
            console.log(e.target, disable_cross)
            if(!disable_cross)
            $('.lightbox').slideToggle();
        });
        $('#cross_info').click(function() {
            // $('.lightbox').fadeIn(800);

            $('.info_wrapper').fadeOut(500);
            setTimeout(()=>{disable_cross = false;}, 400)
        });
        $('.evt').click(function() {
            disable_cross = true;
            $('.info_wrapper').fadeIn(500);

            // $('.lightbox').fadeOut(500);
        });
    </script>


    </div>
    <script type="text/javascript">
    var item = document.querySelector('#item');
    var ham_menu = document.querySelector('#ham_menu');
      function open(ref) {
        console.log(3);
        item.className="";
        item.innerHTML=eval(ref).innerHTML;
      }
      contact.addEventListener("click",function(){
        open('contacts');
      });
      
      Events.addEventListener('click', function(){
        open('events');
      })
      function handleResize(){
        document.body.style.height = window.innerHeight+"px";
      }
      window.addEventListener("load",handleResize);
      window.addEventListener("orientationchange",handleResize);
      window.addEventListener("resize",handleResize)

      window.addEventListener('load',function(){
        setTimeout(function(){
          for(var i = 1; i <= 70; i++){
            box.innerHTML += '<div id="b'+i+'"></div>';
          }
          box.className = "transparent"
          setTimeout(function(){
            box.className = "logo";
            setTimeout(function(){
              document.querySelector('svg').remove();
              box.className = "text";
              setTimeout(function(){
                loader.className = "loaded";
                setTimeout(function(){
                  logotext.style.opacity = 1;
                  Landing.style.opacity = 1;
                },750);
              },3000);
            },3000);
          },2000);
        },2000);
      });

      ham.addEventListener('click',function(){
        if(ham_menu.className=="inactive"){
          ham_menu.className = "active";
          ham_wrapper.style.display = "block";
        }
        else {
          ham_menu.className = "inactive";
          ham_wrapper.style.display = "none";
        }
      });

      document.body.addEventListener("click",function(e){
        if(ham_menu.className == "active")
          if(e.target.getAttribute("id")=="ham_wrapper")
            ham.click();
      });

      back_arrow.addEventListener("click",function(){
        ham.click();
      });

    </script>
  </body>
</html>
